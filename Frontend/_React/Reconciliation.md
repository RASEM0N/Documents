# Детальный React

Статьи:
- https://habr.com/ru/articles/786102/
- https://habr.com/ru/articles/444276/
- https://medium.com/@Vaibhavihole31/react-fiber-architecture-b8ac9f38cfb5

Видео:
- https://www.youtube.com/watch?v=A0W2n2azH5s
- https://www.youtube.com/watch?v=NPXJnKytER4

## Reconciliation
`Reconciliation - это процесс согласования виртуального дерева с реальным DOM.`

### Как это работает
1. `Создание/Изменение виртуальной DOM`;
2. `Использование алгоритма diffing` - есть 2-е версии Virtual DOM: текущая и после изменения состояния. Алгоритм призван эффективно найти различия между ними;
3. `Применение необходимых обновлений к реальной DOM` - применение изменений (различий между текущим и измененным Virtual DOM) к DOM дереву;

### Зачем это
- `Улучшение производительности`;
- `Создание отзывчивого пользовательского интерфейса`;
- `Упрощение процесса разработки`;

### React-reconcile

`Reconciliation` вынесен в отдельный пакет `react-reconcile` он работает в двух режимах:

- `Mutation mode` - для платформ, позволяющих мутировать итоговое дерево;
- `Persistent mode` - для платформ с иммутабельными деревьями. В этом случае, на каждое изменение, все дерево клонируется целиком, производятся модификации, а затем все дерево полностью заменяется на модифицированное

## Рендеры
Обертки вокруг `react-reconcile`:
- `React DOM` - он обеспечивает привязку к DOM-дереву браузера;
- `React Native` - нативный рендеринг на мобильных платформах;
- `React ART` - позволяет рисовать векторную графику средствами React;

## Fiber
`Fiber - это улучшенная версия движка reconciliation, предназначенная для более эффективной обработки обновлений с меньшими задержками.`

### Как это работает
1. `Разбивка работы на части` - это разбитие процесса обновления **на более мелкие и управляемые задачи**, называемые `fibers`. `Fibers` представляет собой единицы работы, например обновление компонента или обработку события;
2. `Расстановка приоритетов для задач` - `React Fiber` использует планировщик для расстановки приоритетов для задач в зависимости от их важности;
3. `Разделение времени на отрезки` - вместо того чтобы пытаться закончить всё сразу, вы выделяете небольшие отрезки времени для каждой задачи (чтоб не зависало и было все быстро);
4. `Concurrent Mode` - `React Fiber` работает в `concurrent mode`, что означает, что он может работать над несколькими задачами одновременно, не блокируя основной поток. Это позволяет React обрабатывать прерывания и более эффективно реагировать на взаимодействия с пользователем.