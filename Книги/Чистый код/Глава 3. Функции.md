- Функции должны выполнять только одну операцию и ничего другого она не должна делать
- Не используйте switch, а если без него не как, то используйте его только в низкоуровневом классе и не дублируйте его
- Чем меньше аргументов принимает функция тем лучше
- Не используйте в качестве аргумента аргументы-флаги, лучше раздробите на несколько функций данную функцию
- Не допускайте побочный эффектов в вашей функции, чтоб не было чего-то неожиданного в вашей функции 

#### ФУНКЦИЯ ДОЛЖНА ВЫПОЛНЯТЬ ТОЛЬКО ОДНУ ОПЕРАЦИЮ. ОНА ДОЛЖНА ВЫПОЛНЯТЬ ЕЕ ХОРОШО. И НИЧЕГО ДРУГОГО ОНА ДЕЛАТЬ НЕ ДОЛЖНА.

```java

// 3.2
public static String renderPageWithSetupsAndTeardowns(
	 PageData pageData, 
	 boolean isSuite
) throws Exception {
	 boolean isTestPage = pageData.hasAttribute("Test");
	 if (isTestPage) {
	 
	     // 1 уровень абстракции, который отвечает за то, что
	     // обработать кейс когда страница тестовая 

		 // тута получаем вики страницу
		 WikiPage testPage = pageData.getWikiPage();

         // ниже работаем с буффером и т.д...
         // что соверншено не нужно для отрисовки страница
         // нам надо просто кейс обработать тестовый, 
         // а не страницу вики с буфером читать
		 StringBuffer newPageContent = new StringBuffer();
		 includeSetupPages(testPage, newPageContent, isSuite);
		 newPageContent.append(pageData.getContent());
		 includeTeardownPages(testPage, newPageContent, isSuite);
		 pageData.setContent(newPageContent.toString());
	 }

     // 2 уровень абстрации что отвечает за получение html-ки
	 return pageData.getHtml();
}
```

```java 

// 3.3
public static String renderPageWithSetupsAndTeardowns(
	PageData pageData,
	boolean isSuite
) throws Exception {

	 // 1 уровень абстрации, в котором мы просто отправляем html
	 // и обрабатываем кейс, что у нас может быт тествая страничка
 
	 if (isTestPage(pageData)) {
		  includeSetupAndTeardownPages(pageData, isSuite);
	 }
	 return pageData.getHtml();
}
```

Проблема в том, что иногда бывает трудно определить, что же считать «одной операцией». В листинге 3.3 выполняется одна операция? Легко возразить, что в нем выполняются минимум три операции: 

1. Функция проверяет, является ли страница тестовой страницей. 
2. Если является, то в нее включаются начальные и конечные блоки. 
3. Для страницы генерируется код HTML. 

Так как же? Сколько операций выполняет функция — одну или три? **Обратите внимание: три этапа работы функции находятся на одном уровне абстракции под объявленным именем функции.**

**Если функция выполняет только те действия, которые находятся на одном уровне под объявленным именем функции, то эта функция выполняет одну операцию**. В конце концов, функции пишутся прежде всего для разложения более крупной концепции (иначе говоря, имени функции) на последовательность действий на следующем уровне абстракции.
Вполне очевидно, что листинг 3.1 содержит множество различных действий на разных уровнях абстракции. Поэтому в нем явно выполняется более одной операции. Даже листинг 3.2 содержит два уровня абстракции; это доказывается тем, что нам удалось его сократить. С другой стороны, осмысленно сократить листинг 3.3 очень трудно. Команду if можно вынести в функцию с именем includeSetupsAndTeardownsIfTestPage, но это простая переформулировка кода без изменения уровня абстракции

Итак, чтобы определить, что функция выполняет более одной операции, попробуйте извлечь из нее другую функцию, которая бы не являлась простой переформулировкой реализации

Чтобы убедиться в том, что функция выполняет «только одну операцию», необходимо проверить, что все команды функции находятся на одном уровне абстракции

#### Чтение кода сверху вниз: правило понижения
За каждой функцией должны следовать функции следующего уровня абстракции. Это позволяет читать код, последовательно спускаясь по уровням абстракции в ходе чтения списка функций. Я называю такой подход «правилом понижения».
- Чтобы включить начальные и конечные блоки, мы сначала включаем начальные блоки, затем содержимое тестовой страницы, а затем включаем конечные блоки. 
	- Чтобы включить начальные блоки, мы сначала включаем пакетные начальные блоки, если имеем дело с пакетом тестов, а затем включаем обычные начальные блоки. 
	- Чтобы включить пакетные начальные блоки, мы ищем в родительской иерархии страницу SuiteSetUp и добавляем команду include с путем к этой странице.
	-  Чтобы найти в родительской иерархии…

Опыт показывает, что программистов очень трудно научить следовать этому правилу и писать функции, остающиеся на одном уровне абстракции. Тем не менее освоить этот прием очень важно. Он играет ключевую роль для создания коротких функций, выполняющих только одну операцию
